<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Multiple ALTO Resources Query Using Multipart Message</title>

  
<style type="text/css">/*<![CDATA[*/

body {
  font: 16px "Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 24px;
  margin: 75px auto;
  max-width: 624px;
  padding: 0 5px;
}

.title, .filename, h1, h2, h3, h4, h5 {
  font: 16px "Roboto Condensed","Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  font-size-adjust: 0.5;
  font-weight: bold;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title, #rfc\.title h1 { font-size: 32px; }
h1, section h1, h2, section h2, section h3, nav h2 { font-size: 20px; }
h3, section h4, h4, section h5 { font-size: 16px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header, table#rfc\.headerblock {
  width: 100%;
}
table.header td, table#rfc\.headerblock td {
  border: none;
  background-color: transparent;
  color: black;
  padding: 0;
}
.filename {
  display: block;
  color: rgb(119, 119, 119);
  font-size: 20px;
  font-weight: normal;
  line-height: 100%;
  margin: 10px 0 32px;
}
#rfc\.abstract+p, #rfc\.abstract p {
  font-size: 20px;
  line-height: 28px;
}

samp, tt, code, pre {
  font: 15px Consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure, caption {
  font-style: italic;
  margin: 0 1.5em;
  text-align: left;
}

address {
  margin: 16px 2px;
  line-height: 20px;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn, address b {
  font-weight: normal;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}
hr.noprint {
  display: none;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}
address {
  font-style: normal;
}

ul.toc ul {
  margin: 0 0 0 2em;
}
ul.toc li {
  list-style: none;
  margin: 0;
}

@media screen and (min-width: 924px) {
  body {
    padding-right: 350px;
  }
  body>ul.toc, body>#rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    z-index: 1;
    overflow: auto;
    overscroll-behavior: contain;
  }
  body>#rfc\.toc {
    top: 55px;
  }
  body>ul.toc {
    top: 100px;
  }

  ul.toc {
    margin: 0 0 0 4px;
    font-size: 12px;
    line-height: 20px;
  }
  ul.toc ul {
    margin-left: 1.2em;
  }
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
/*]]>*/</style>
<meta name="viewport" content="initial-scale=1.0">


  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminologies">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Resource Query Entry">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Resource Response Entry">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Resource Response Entry Body">
<link href="#rfc.section.3" rel="Chapter" title="3 Use Cases">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Simple Batch Query">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Properties Constrained Query">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Path Vector Query">
<link href="#rfc.section.4" rel="Chapter" title="4 Requirements">
<link href="#rfc.section.5" rel="Chapter" title="5 Overview of Approach">
<link href="#rfc.section.6" rel="Chapter" title="6 Multipart Query Resource">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Media Type">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 HTTP Method">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Capabilities">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Accept Input Parameters">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 Uses">
<link href="#rfc.section.6.6" rel="Chapter" title="6.6 Response">
<link href="#rfc.section.7" rel="Chapter" title="7 Protocol Errors">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Partial Error">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Entire Error">
<link href="#rfc.section.8" rel="Chapter" title="8 Examples">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 IRD Example">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Example 1: Simple Batch Query">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Example 2: Properties Constrained Query">
<link href="#rfc.section.8.4" rel="Chapter" title="8.4 Example 3: Path Vector Query">
<link href="#rfc.section.9" rel="Chapter" title="9 Compatibility">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 Compatibility with Legacy ALTO Clients/Servers">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 Compatibility with Existing Protocol Extensions">
<link href="#rfc.section.9.3" rel="Chapter" title="9.3 Compatibility with New Communication Mechanism">
<link href="#rfc.section.10" rel="Chapter" title="10 Misc Considerations">
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Support Incremental Update">
<link href="#rfc.section.10.2" rel="Chapter" title="10.2 Anonymous Resources">
<link href="#rfc.section.11" rel="Chapter" title="11 Security Considerations">
<link href="#rfc.section.12" rel="Chapter" title="12 IANA Considerations">
<link href="#rfc.section.12.1" rel="Chapter" title="12.1 application/alto-* Media Types">
<link href="#rfc.section.13" rel="Chapter" title="13 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="14 References">
<link href="#rfc.references.1" rel="Chapter" title="14.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="14.2 Informative References">
<link href="#rfc.appendix.A" rel="Chapter" title="A Figures">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.11.1 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Chen, S. and J. Zhang" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-zhang-alto-multipart-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2018-12-10" />
  <meta name="dct.abstract" content="Many ALTO use cases involve multiple ALTO information resources like different network maps, cost maps and property maps to achieve their own specific goals.  To make the ALTO client query them one by one is not only inefficient but also error-prone. The inconsistent responses can be performed because of the unstable communication environment, and finally conduct the unexpected traffic optimization. Further more, some ALTO information resources may have correlation, which means one&#8217;s input parameters may depends on another one&#8217;s response. To address those issues, some advanced query schema is required. This document proposes an ALTO extension to support the multiple ALTO resources query in the single request using the HTTP multipart message and the existing JSON query languages." />
  <meta name="description" content="Many ALTO use cases involve multiple ALTO information resources like different network maps, cost maps and property maps to achieve their own specific goals.  To make the ALTO client query them one by one is not only inefficient but also error-prone. The inconsistent responses can be performed because of the unstable communication environment, and finally conduct the unexpected traffic optimization. Further more, some ALTO information resources may have correlation, which means one&#8217;s input parameters may depends on another one&#8217;s response. To address those issues, some advanced query schema is required. This document proposes an ALTO extension to support the multiple ALTO resources query in the single request using the HTTP multipart message and the existing JSON query languages." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">ALTO WG</td>
<td class="right">S. Chen</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">J. Zhang</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Tongji University</td>
</tr>
<tr>
<td class="left">Expires: June 13, 2019</td>
<td class="right">December 10, 2018</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Multiple ALTO Resources Query Using Multipart Message<br />
  <span class="filename">draft-zhang-alto-multipart-latest</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Many ALTO use cases involve multiple ALTO information resources like different network maps, cost maps and property maps to achieve their own specific goals.  To make the ALTO client query them one by one is not only inefficient but also error-prone. The inconsistent responses can be performed because of the unstable communication environment, and finally conduct the unexpected traffic optimization. Further more, some ALTO information resources may have correlation, which means one&#8217;s input parameters may depends on another one&#8217;s response. To address those issues, some advanced query schema is required. This document proposes an ALTO extension to support the multiple ALTO resources query in the single request using the HTTP multipart message and the existing JSON query languages.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;, &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this document are to be interpreted as described in <a href="#RFC2119" class="xref">[RFC2119]</a>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on June 13, 2019.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2018 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminologies</a>
</li>
<ul><li>2.1.   <a href="#rfc.section.2.1">Resource Query Entry</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Resource Response Entry</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Resource Response Entry Body</a>
</li>
</ul><li>3.   <a href="#rfc.section.3">Use Cases</a>
</li>
<ul><li>3.1.   <a href="#rfc.section.3.1">Simple Batch Query</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Properties Constrained Query</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Path Vector Query</a>
</li>
</ul><li>4.   <a href="#rfc.section.4">Requirements</a>
</li>
<li>5.   <a href="#rfc.section.5">Overview of Approach</a>
</li>
<li>6.   <a href="#rfc.section.6">Multipart Query Resource</a>
</li>
<ul><li>6.1.   <a href="#rfc.section.6.1">Media Type</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">HTTP Method</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Capabilities</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Accept Input Parameters</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">Uses</a>
</li>
<li>6.6.   <a href="#rfc.section.6.6">Response</a>
</li>
</ul><li>7.   <a href="#rfc.section.7">Protocol Errors</a>
</li>
<ul><li>7.1.   <a href="#rfc.section.7.1">Partial Error</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Entire Error</a>
</li>
</ul><li>8.   <a href="#rfc.section.8">Examples</a>
</li>
<ul><li>8.1.   <a href="#rfc.section.8.1">IRD Example</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Example 1: Simple Batch Query</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Example 2: Properties Constrained Query</a>
</li>
<li>8.4.   <a href="#rfc.section.8.4">Example 3: Path Vector Query</a>
</li>
</ul><li>9.   <a href="#rfc.section.9">Compatibility</a>
</li>
<ul><li>9.1.   <a href="#rfc.section.9.1">Compatibility with Legacy ALTO Clients/Servers</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">Compatibility with Existing Protocol Extensions</a>
</li>
<li>9.3.   <a href="#rfc.section.9.3">Compatibility with New Communication Mechanism</a>
</li>
</ul><li>10.   <a href="#rfc.section.10">Misc Considerations</a>
</li>
<ul><li>10.1.   <a href="#rfc.section.10.1">Support Incremental Update</a>
</li>
<li>10.2.   <a href="#rfc.section.10.2">Anonymous Resources</a>
</li>
</ul><li>11.   <a href="#rfc.section.11">Security Considerations</a>
</li>
<li>12.   <a href="#rfc.section.12">IANA Considerations</a>
</li>
<ul><li>12.1.   <a href="#rfc.section.12.1">application/alto-* Media Types</a>
</li>
</ul><li>13.   <a href="#rfc.section.13">Acknowledgements</a>
</li>
<li>14.   <a href="#rfc.references">References</a>
</li>
<ul><li>14.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>14.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li>Appendix A.   <a href="#rfc.appendix.A">Figures</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Application-Layer Traffic Optimization (ALTO) protocol <a href="#RFC7285" class="xref">[RFC7285]</a> and its extensions already define several types of information resources, like Network Map, Cost Map and Property Map, to expose useful network informations to applications. However, many applications do not only use a single information resource to perform their traffic optimization. Retrieving multiple ALTO information resources is very common in many ALTO use cases.</p>
<p id="rfc.section.1.p.2">Using the current ALTO framework defined in <a href="#RFC7285" class="xref">[RFC7285]</a>, the ALTO client can only query multiple ALTO information resources one by one. It is not only inefficient but also error-prone. Because of the network delay between different requests and the frequent change of ALTO information resources, the responses received by the ALTO client may be inconsistent.</p>
<p id="rfc.section.1.p.3">Further more, some ALTO information resources have known dependencies, which means the ALTO client may need one&#8217;s response to decide another one&#8217;s query input parameters.</p>
<p id="rfc.section.1.p.4">To be summarized, we need the multipart query service for three reasons:</p>
<p></p>

<ul>
<li>Clients may want to query multiple ALTO information resources in a single request to reduce the time consumption.</li>
<li>Clients may want to query multiple ALTO resources consistently, which means the server should guarantee the responses of all resources are generated at the same time.</li>
<li>Some use cases need to query multiple ALTO resources with a joint relationship.</li>
</ul>
<p id="rfc.section.1.p.6">This document defines a new ALTO services for: (1) querying multiple ALTO resources in a single request/response, and (2) supporting general-purpose JSON query languages to resolve the relational query.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#terminologies" id="terminologies">Terminologies</a>
</h1>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#resource-query-entry" id="resource-query-entry">Resource Query Entry</a>
</h1>
<p id="rfc.section.2.1.p.1">TBD.</p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#resource-response-entry" id="resource-response-entry">Resource Response Entry</a>
</h1>
<p id="rfc.section.2.2.p.1">TBD.</p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> <a href="#resource-response-entry-body" id="resource-response-entry-body">Resource Response Entry Body</a>
</h1>
<p id="rfc.section.2.3.p.1">TBD.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#usage" id="usage">Use Cases</a>
</h1>
<p id="rfc.section.3.p.1">The following use cases can benefit from the multipart query service.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#simple-batch-query" id="simple-batch-query">Simple Batch Query</a>
</h1>
<p id="rfc.section.3.1.p.1">The simplest use case is to query a batch of ALTO resources in a single request.</p>
<p id="rfc.section.3.1.p.2">Although the ALTO client can perform ALTO requests for multiple times, it is not only inefficient but also inconsistent.</p>
<p id="rfc.section.3.1.p.3">For example, the ALTO server provides a network map resource A and a dependent cost map resource B. Both resources may change frequently. Assume the ALTO client queries the network map first, and it gets the revision A1. When the client queries the cost map, the network map may be already changed from A1 to A2, and the client receives cost map B2 which depends on A2 not A1. So the responded cost map B2 is not consistent with the previous network map A1.</p>
<p id="rfc.section.3.1.p.4">This case requires the ALTO server to provide a way for the ALTO client to query multiple ALTO resources in a single transaction.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#properties-constrained-query" id="properties-constrained-query">Properties Constrained Query</a>
</h1>
<p id="rfc.section.3.2.p.1">Beyond the simple batch query, there are also some another use cases requiring a new service for relational query. For example, Some clients may need to query an endpoint property map first, and find endpoints with some properties fitting some conditions. And then they query the endpoint cost of these endpoints.</p>
<p id="rfc.section.3.2.p.2">In this case, the endpoint cost query depends on the result of the property map query. Although the ALTO client can cache the whole property map in its local storage, it is still not efficient and may conduct the consistency issue if the property map changes frequently. So it requires a new service to provide multiple dependent resources efficiently and consistently.</p>
<p id="rfc.section.3.2.p.3">A general multipart query service benefits the ALTO client in two aspects:</p>
<p></p>

<ul>
<li>It allows the ALTO client to specify the boolean test to reduce the transmission of the useless data from the ALTO server.</li>
<li>It compounds multiple ALTO information resources in a single response to reduce the communication times. Thus, the transmission latency can be reduced.</li>
</ul>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#path-vector-query" id="path-vector-query">Path Vector Query</a>
</h1>
<p id="rfc.section.3.3.p.1">Another use case requiring the multiple resource query is the relational query between the on-demand generated resources. A straightforward example is the path vector query demonstrated in <a href="#I-D.ietf-alto-path-vector" class="xref">[I-D.ietf-alto-path-vector]</a>.</p>
<p><a href="#I-D.ietf-alto-path-vector" class="xref">[I-D.ietf-alto-path-vector]</a> introduces an extension of ALTO to provide path vector information by cost map and unified property map <a href="#I-D.ietf-alto-unified-props-new" class="xref">[I-D.ietf-alto-unified-props-new]</a>. The client using path vector extension will usually query cost map and a dynamically generated property map sequentially. It is even hard to cache the full data of resources, because both the cost map and the property map are on-demand generated by the query input here. Thus, the only way to reduce the time consumption is to compound the two resources.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#requirements" id="requirements">Requirements</a>
</h1>
<p id="rfc.section.4.p.1">From the use cases described in <a href="#usage" class="xref">Section 3</a>, there are three additional requirements for ALTO protocol:</p>
<p></p>

<dl>
<dt>MPQ-Req1:</dt>
<dd style="margin-left: 8">The ALTO protocol SHOULD allow the client to query multiple ALTO resources in a single request, and return the result in a single response.</dd>
<dt></dt>
<dd style="margin-left: 8">It is the basic requirement to provide the query for the compound resources.  Even simple cases can benefit if this requirement is realized.</dd>
<dt>MPQ-Req2:</dt>
<dd style="margin-left: 8">The ALTO protocol SHOULD provide general filter schema for any ALTO resources.</dd>
<dt></dt>
<dd style="margin-left: 8">Current filter schema in ALTO protocol only supports the simple boolean test of numerical comparison. And the boolean filtered query is only supported by the cost map and the endpoint cost resource. It is not enough for the general cases. Even simple property map may require more general filter schema.</dd>
<dt>MPQ-Req3:</dt>
<dd style="margin-left: 8">The ALTO protocol SHOULD support relational query for mulitple joint resources.</dd>
<dt></dt>
<dd style="margin-left: 8">Some ALTO resources are relational and cannot be used individually. The path vector query is such an example. In these use cases, the support of relational query for multiple joint resources is very helpful.</dd>
</dl>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#overview-of-approach" id="overview-of-approach">Overview of Approach</a>
</h1>
<p id="rfc.section.5.p.1">This document uses two key techniques to realize the general multiple resources query:</p>
<p></p>

<ul>
<li>Use Multipart message <a href="#RFC2046" class="xref">[RFC2046]</a> to deliver compound resources.</li>
<li>Accept JSON Query Language like XQuery <a href="#W3CXQUERY" class="xref">[W3CXQUERY]</a> and JSONiq <a href="#JSONIQ" class="xref">[JSONIQ]</a> for general query process and relational joint query.</li>
</ul>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#multipart-query-resource" id="multipart-query-resource">Multipart Query Resource</a>
</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#media-type" id="media-type">Media Type</a>
</h1>
<p><samp>multipart/related</samp> <a href="#RFC2387" class="xref">[RFC2387]</a>.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#http-method" id="http-method">HTTP Method</a>
</h1>
<p id="rfc.section.6.2.p.1">An ALTO Multipart Query resource is requested using the HTTP POST method.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#capabilities" id="capabilities">Capabilities</a>
</h1>
<p id="rfc.section.6.3.p.1">The capabilities are defined by an object of type MultipartQueryCapabilities:</p>
<pre>
    object {
      JSONString query-langs&lt;0..*&gt;;
    } MultipartQueryCapabilities;
</pre>
<p id="rfc.section.6.3.p.2">where <samp>query-langs</samp> is an array of JSONString to indicate which query languages are supported by this resource.</p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> <a href="#mp-query-params" id="mp-query-params">Accept Input Parameters</a>
</h1>
<p id="rfc.section.6.4.p.1">The input parameters for a Multipart Query request are supplied in the entity body of the POST request. This document specifies the input parameters with a data format indicated by the media type <samp>application/alto-multipartquery+alto</samp>, which is a JSON object of type ReqMultipartQuery:</p>
<pre>
    object {
      ResourceQuery   resources&lt;1..*&gt;;
      [JsonString     query-lang;]
    } ReqMultipartQuery;

    object {
      JsonString      resource-id;
      [JsonValue      input;]
    } ResourceQuery;
</pre>
<p id="rfc.section.6.4.p.2">with fields:</p>
<p></p>

<dl>
<dt>resources:</dt>
<dd style="margin-left: 8">List of ResourceQuery objects for which resources are to be queried and how to query them. Each ResourceQuery object MUST include the <samp>resource-id</samp> field to indicate which resource is to be queried. If the queried resource requires the POST method, the <samp>input</samp> field MUST be specified. The value of the <samp>input</samp> field MUST be either a JSONString or a JSONObject. When its value is a JSONObject, its format MUST be as the accept input parameters of its resource.  When its value is a JSONString, it MUST be a program written in the query language specified by the <samp>query-lang</samp> field.</dd>
<dt>query-lang:</dt>
<dd style="margin-left: 8">Optional. The value of the <samp>query-lang</samp> field MUST be one of values in the <samp>query-langs</samp> capability. If this field is not specified in the request, the ALTO client SHOULD NOT use any query language in the <samp>input</samp> field.</dd>
</dl>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> <a href="#uses" id="uses">Uses</a>
</h1>
<p id="rfc.section.6.5.p.1">An array with the resource ID(s) of resource(s) which this multipart query resource can compound. The used resource can be any available ALTO resources except for the multipart query resource. If the <samp>uses</samp> field is not specified, all the available ALTO resources can be queried except for the multipart query resource.</p>
<h1 id="rfc.section.6.6">
<a href="#rfc.section.6.6">6.6.</a> <a href="#response" id="response">Response</a>
</h1>
<p id="rfc.section.6.6.p.1">The response of multipart query resource is a multipart message. Each part of this multipart message is the response of a queried resource in the request.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#protocol-errors" id="protocol-errors">Protocol Errors</a>
</h1>
<p id="rfc.section.7.p.1">At the top level, the request of ALTO Multipart Query resource may conduct two types of errors: Partial Error and Entire Error.</p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> <a href="#partial-error" id="partial-error">Partial Error</a>
</h1>
<p id="rfc.section.7.1.p.1">The Partial Error only occurs when the value of the <samp>resource-id</samp> field or the <samp>input</samp> field is invalid.</p>
<p id="rfc.section.7.1.p.2">When the Partial Error occurs, the ALTO server MUST still return the response in the media type <samp>multipart/related</samp>. For the resource query entry with an error, the ALTO server MUST specify the <samp>Content-Type</samp> of its resource response entry as <samp>application/alto-error+json</samp>, and include the ALTO error message in its resource response entry body. For the resource query entry without any error, the ALTO server MUST perform its query request normally.</p>
<p id="rfc.section.7.1.p.3">The value of the <samp>resource-id</samp> field is invalid when this resource id is not defined by the Information Resource Directory. In this case, the ALTO server MUST return the E_INVALID_FIELD_VALUE error.</p>
<p id="rfc.section.7.1.p.4">The validation of each <samp>input</samp> field of the multipart query input parameters depends on the queried resource:</p>
<p></p>

<ul>
<li>If the <samp>input</samp> field of the multipart query input parameters is neither a JSONObject nor a JSONString, the ALTO server SHOULD return the E_INVALID_FIELD_TYPE error, unless a future protocol extension supports the non-JSONObject input parameters.</li>
<li>If the <samp>input</samp> field of the multipart query input parameters is a JSONObject, the ALTO server MUST validate the value using its queried resource and return the corresponding error if it has.</li>
<li>If the <samp>input</samp> field of the multipart query input parameters is a JSONString: <ul>
<li>If the <samp>query-lang</samp> is not specified, the ALTO server MUST return the E_INVALID_FIELD_TYPE error.</li>
<li>If the <samp>query-lang</samp> is specified, the ALTO server MUST execute this JSONString as a program written in the <samp>query-lang</samp>. If the execution failed, the ALTO server MUST return the E_INVALID_FIELD_VALUE error. If the execution succeed but the result fails to pass the validation of the queried resource, the ALTO server MUST return the E_INVALID_FIELD_VALUE error and attach the error message returned by the queried resource into the <samp>message</samp> field of the ALTO error message.</li>
</ul>
</li>
</ul>
<p id="rfc.section.7.1.p.6">The syntax error is an Entire Error.</p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> <a href="#entire-error" id="entire-error">Entire Error</a>
</h1>
<p id="rfc.section.7.2.p.1">Any other invalid request will conduct the Entire Error.</p>
<p id="rfc.section.7.2.p.2">When the Entire Error occurs, the ALTO server MUST return the error response in the media type <samp>application/alto-error+json</samp> instead of <samp>multipart/related</samp>. The process of the Entire Error is as defined in Section 8.5 of <a href="#RFC7285" class="xref">[RFC7285]</a>.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#examples" id="examples">Examples</a>
</h1>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#ird-example" id="ird-example">IRD Example</a>
</h1>
<p id="rfc.section.8.1.p.1">Assume the root IRD is like the following:</p>
<pre>
  {
    "meta": {
        "path-vector": {
          "cost-mode": "array",
          "cost-metric": "ane-path"
        },
        "num-routingcost": {
          "cost-mode": "numerical",
          "cost-metric": "routingcost"
        },
        "num-hopcount": {
          "cost-mode": "numerical",
          "cost-metric": "hopcount"
        }
    },
    "resources": {
      "my-default-networkmap": {
        "uri": "http://alto.example.com/networkmap",
        "media-type": "application/alto-networkmap+json"
      },
      "my-default-costmap": {
        "uri": "http://alto.example.com/costmap",
        "media-type": "application/alto-costmap+json",
        "capabilities": {
          "cost-type-names": [ "num-routingcost" ]
        },
        "uses": [ "my-default-networkmap" ]
      },
      "my-filtered-costmap": {
        "uri": "http://alto.example.com/costmap/filtered",
        "media-type": "application/alto-costmap+json",
        "accepts": "application/alto-costmapfilter+json",
        "capabilities": {
          "cost-type-names": [ "num-hopcount" ]
        },
        "uses": [ "my-default-networkmap" ]
      },
      "endpoint-path-vector": {
        "uri": "http://alto.exmaple.com/endpointcost",
        "media-type": "application/alto-endpointcost+json",
        "accepts": "application/alto-endpointcostparams+json",
        "capabilities": {
          "cost-constraints": true,
          "cost-type-names": [ "path-vector" ],
        },
        "property-map": "propmap-availbw"
      },
      "propmap-availbw-delay": {
        "uri": "http://alto.exmaple.com/propmap/availbw",
        "media-type": "application/alto-propmap+json",
        "accepts": "application/alto-propmapparams+json",
        "capabilities": {
          "domain-types": [ "ane" ],
          "prop-types": [ "availbw" ]
        }
      },
      "propmap-location": {
        "uri": "http://alto.exmaple.com/propmap/location",
        "media-type": "application/alto-propmap+json",
        "accepts": "application/alto-propmapparams+json",
        "capabilities": {
          "domain-types": [ "pid" ],
          "prop-types": [ "country", "state" ]
        }
      },
      "multipart-query": {
        "uri": "http://alto.example.com/multipart",
        "media-type": "multipart/related",
        "accepts": "application/alto-multipartquery+json",
        "capabilities": {
          "query-langs": [ "xquery", "jsoniq" ]
        }
      }
    }
  }
</pre>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> <a href="#example-1-simple-batch-query" id="example-1-simple-batch-query">Example 1: Simple Batch Query</a>
</h1>
<pre>
POST /multipart HTTP/1.1
Host: alto.example.com
Accept: multipart/related, application/alto-error+json
Content-Lenght: [TBD]
Content-Type: application/alto-multipartquery+json

{
  "resources": [
    {
      "resource-id": "my-default-networkmap"
    },
    {
      "resource-id": "my-default-costmap"
    }
  ]
}
</pre>
<pre>
HTTP/1.1 200 OK
Content-Lenght: [TBD]
Content-Type: multipart/related; boundary=simple-batch-query

--simple-batch-query
Content-Type: application/alto-networkmap+json

{
  "meta": {
    "vtag": {
      "resource-id": "my-default-networkmap",
      "tag": "75ed013b3cb58f896e839582504f622838ce670f"
    }
  },
  "network-map": {
    "PID1" : {
      "ipv4" : [
        "192.0.2.0/24",
        "198.51.100.0/25"
      ]
    },
    "PID2" : {
      "ipv4" : [
        "198.51.100.128/25"
      ]
    },
    "PID3" : {
      "ipv4" : [
        "0.0.0.0/0"
      ],
      "ipv6" : [
        "::/0"
      ]
    }
  }
}

--simple-batch-query
Content-Type: application/alto-costmap+json

{
  "meta": {
    "dependent-vtags": [
      {
        "resource-id": "my-default-networkmap",
        "tag": "75ed013b3cb58f896e839582504f622838ce670f"
      }
    ],
    "cost-type": {
      "cost-mode": "numerical",
      "cost-metric": "routingcost"
    }
  },
  "cost-map": {
    "PID1": { "PID1": 1,  "PID2": 5,  "PID3": 10 },
    "PID2": { "PID1": 5,  "PID2": 1,  "PID3": 15 },
    "PID3": { "PID1": 20, "PID2": 15  }
  }
}
</pre>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> <a href="#example-2-properties-constrained-query" id="example-2-properties-constrained-query">Example 2: Properties Constrained Query</a>
</h1>
<p id="rfc.section.8.3.p.1">NOTE: In this example, we use the &#8220;`&#8221; block to express the raw string with unescaped characters like <samp>\n</samp> and <samp>\"</samp>. It is not valid HTTP body, but only used to better present. When the request is sent to the ALTO server, the &#8220;`&#8221; block should be escaped.</p>
<pre>
POST /multipart HTTP/1.1
Host: alto.example.com
Accept: multipart/related, application/alto-error+json
Content-Lenght: [TBD]
Content-Type: application/alto-multipartquery+json

{
  "query-lang": "jsoniq",
  "resources": [
    {
      "resource-id": "propmap-location"
    },
    {
      "resource-id": "my-default-costmap",
      "input": `
        let $propmap := collection("propmap-location")
                        .("property-map")
        return {
          "cost-type": {
            "cost-mode": "numerical",
            "cost-metric": "hopcount"
          },
          "pids": {
            "srcs": [
              for $pid in keys($propmap)
              where $propmap.$pid.country eq "US"
              return substring-after($pid, "PID:")
            ],
            "dsts": [
              for $pid in keys($propmap)
              where $propmap.$pid.country eq "CA"
              return substring-after($pid, "PID:")
            ]
          }
        }
      `
    }
  ]
}
</pre>
<pre>
HTTP/1.1 200 OK
Content-Lenght: [TBD]
Content-Type: multipart/related; boundary=prop-const-query

--prop-const-query
Content-Type: application/alto-propmap+json

{
  "property-map": {
    "pid:PID1": {
      "country": "US",
      "state": "CA"
    },
    "pid:PID2": {
      "country": "US",
      "state": "CT"
    },
    "pid:PID3": {
      "country": "CA",
      "state": "QC"
    },
    "pid:PID4": {
      "country": "CA",
      "state": "NT"
    },
    "pid:PID5": {
      "country": "FR"
    }
  }
}

--prop-const-query
Content-Type: application/alto-costmap+json

{
  "meta": {
    "cost-type": {
      "cost-mode": "numerical",
      "cost-metric": "hopcount"
    }
  },
  "cost-map": {
    "PID1": {
      "PID3": 5,
      "PID4": 7
    },
    "PID2": {
      "PID3": 8,
      "PID4": 4
    }
  }
}
</pre>
<h1 id="rfc.section.8.4">
<a href="#rfc.section.8.4">8.4.</a> <a href="#example-3-path-vector-query" id="example-3-path-vector-query">Example 3: Path Vector Query</a>
</h1>
<pre>
POST /multipart HTTP/1.1
Host: alto.example.com
Accept: multipart/related, application/alto-error+json
Content-Lenght: [TBD]
Content-Type: application/alto-multipartquery+json

{
  "query-lang": "jsoniq",
  "resources": [
    {
      "resource-id": "endpoint-path-vector",
      "input": {
        "cost-type": {
          "cost-mode": "array",
          "cost-metric": "ane-path"
        },
        "endpoints": {
          "srcs": [ "ipv4:192.0.2.2" ],
          "dsts": [ "ipv4:192.0.2.89",
                    "ipv4:203.0.113.45" ]
        }
      }
    },
    {
      "resource-id": "propmap-availbw",
      "input": `
        let $propmap := collection("endpiont-path-vector")
                        .("endpoint-cost-map")
        return {
          "entities": [
            distinct-values(flatten(
              for $src in keys($propmap)
              let $dsts := $propmap.$src
              return flatten(
                for $dst in keys($dsts)
                return $dsts.$dst
              )
            ))
          ],
          "properties": [ "availbw" ]
        }
      `
    }
  ]
}
</pre>
<pre>
HTTP/1.1 200 OK
Content-Length: [TBD]
Content-Type: multipart/related; boundary=path-vector-query

--path-vector-query
Content-Type: application/alto-endpointcost+json

{
  "meta": {
    "cost-type": {
      "cost-mode": "array",
      "cost-metric": "ane-path"
    }
  },
  "endpoint-cost-map": {
    "ipv4:192.0.2.2": {
      "ipv4:192.0.2.89":   [ "ane:L001", "ane:L003", "ane:L004" ],
      "ipv4:203.0.113.45": [ "ane:L001", "ane:L004", "ane:L005" ],
      "ipv6:2001:db8::10": [ "ane:L001", "ane:L005", "ane:L007" ]
    }
  }
}

--path-vector-query
Content-Type: application/alto-propmap+json

{
  "property-map": {
    "ane:L001": { "availbw": 50 },
    "ane:L003": { "availbw": 48 },
    "ane:L004": { "availbw": 55 },
    "ane:L005": { "availbw": 60 },
    "ane:L007": { "availbw": 35 }
  }
}
</pre>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#compatibility" id="compatibility">Compatibility</a>
</h1>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> <a href="#compatibility-with-legacy-alto-clientsservers" id="compatibility-with-legacy-alto-clientsservers">Compatibility with Legacy ALTO Clients/Servers</a>
</h1>
<p id="rfc.section.9.1.p.1">The multipart query service is a new ALTO service using the new media type. So the legacy ALTO client cannot identify this service from the IRD of the ALTO server supporting it. And the legacy ALTO server also cannot interpret the request of a multipart query service sent by the ALTO client.</p>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> <a href="#compatibility-with-existing-protocol-extensions" id="compatibility-with-existing-protocol-extensions">Compatibility with Existing Protocol Extensions</a>
</h1>
<p id="rfc.section.9.2.p.1">The multipart query service can use any ALTO resources exchanging JSON data in request/response mechanism. So all the known ALTO extensions like ALTO Calendar <a href="#I-D.ietf-alto-cost-calendar" class="xref">[I-D.ietf-alto-cost-calendar]</a>, Multi-Cost <a href="#RFC8189" class="xref">[RFC8189]</a> and the Path Vector <a href="#I-D.ietf-alto-path-vector" class="xref">[I-D.ietf-alto-path-vector]</a> extension, which does not change the request/response mechanism, are compatible with the multipart query service.</p>
<h1 id="rfc.section.9.3">
<a href="#rfc.section.9.3">9.3.</a> <a href="#compatibility-with-new-communication-mechanism" id="compatibility-with-new-communication-mechanism">Compatibility with New Communication Mechanism</a>
</h1>
<p id="rfc.section.9.3.p.1">Since the multipart query service use multipart messages as the response instead of the JSON data, the incremental update service defined in <a href="#I-D.ietf-alto-incr-update-sse" class="xref">[I-D.ietf-alto-incr-update-sse]</a> does not support it. If the update service does not notify the incremental change to the ALTO client but only notify the full replacement, it can still work. But it is very inefficient. So an extension to integrate multipart query and the incremental update smoothly is required. HTTP/2 may be a candidate solution to this problem.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#misc-considerations" id="misc-considerations">Misc Considerations</a>
</h1>
<h1 id="rfc.section.10.1">
<a href="#rfc.section.10.1">10.1.</a> <a href="#support-incremental-update" id="support-incremental-update">Support Incremental Update</a>
</h1>
<p id="rfc.section.10.1.p.1">Because the response body entry of the multipart query resource is not a single JSON object, it may not be compatible with the current incremental update representation used in <a href="#I-D.ietf-alto-incr-update-sse" class="xref">[I-D.ietf-alto-incr-update-sse]</a>.</p>
<h1 id="rfc.section.10.2">
<a href="#rfc.section.10.2">10.2.</a> <a href="#anonymous-resources" id="anonymous-resources">Anonymous Resources</a>
</h1>
<p id="rfc.section.10.2.p.1">Some use cases may need the server generates &#8220;anonymous&#8221; ALTO resources for the on-demand information. The &#8220;anonymous&#8221; ALTO resources usually cannot appear alone but need to bind with some &#8220;non-anonymous&#8221; ALTO resources.</p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a>
</h1>
<p id="rfc.section.11.p.1">Allow the ALTO clients to upload the query language script may not be safe. The code injection and many potential attacks can be conducted. The security issue should be discussed and considered.</p>
<p id="rfc.section.11.p.2">To avoid the attacks like the code injection, this document recommends the following approaches:</p>
<p></p>

<dl>
<dt>Database Isolation:</dt>
<dd style="margin-left: 8">Some clients may attempt to access the secure database inside the server.  Isolate the data into the different databases can reduce the risk of the information leak.</dd>
<dt>Application Container Isolation:</dt>
<dd style="margin-left: 8">Attackers may inject harmful code into the input query programs to attempt to access the system control. To avoid this, each query process is recommended to be isolated using the application container.</dd>
<dt>Resource Limit:</dt>
<dd style="margin-left: 8">Even attackers cannot get the permission to crack the data or the system, they can still inject some heavy-load programs to consume the server resources.  Thus, limiting the memory usage and execution time of each query process is highly recommended.</dd>
</dl>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a>
</h1>
<h1 id="rfc.section.12.1">
<a href="#rfc.section.12.1">12.1.</a> <a href="#applicationalto-media-types" id="applicationalto-media-types">application/alto-* Media Types</a>
</h1>
<p id="rfc.section.12.1.p.1">This document registers an additional ALTO media type, listed in <a href="#tbl-media-types" class="xref">Table 1</a>.</p>
<div id="rfc.table.1"></div>
<div id="tbl-media-types"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Additional ALTO Media Type.</caption>
<thead><tr>
<th class="left">Type</th>
<th class="left">Subtype</th>
<th class="left">Specification</th>
</tr></thead>
<tbody><tr>
<td class="left">application</td>
<td class="left">alto-multipartquery+json</td>
<td class="left"><a href="#mp-query-params" class="xref">Section 6.4</a></td>
</tr></tbody>
</table>
<p></p>

<dl>
<dt>Type name:</dt>
<dd style="margin-left: 8">application</dd>
<dt>Subtype name:</dt>
<dd style="margin-left: 8">This document registers multiple subtypes, as listed in <a href="#tbl-media-types" class="xref">Table 1</a>.</dd>
<dt>Required parameters:</dt>
<dd style="margin-left: 8">n/a</dd>
<dt>Optional parameters:</dt>
<dd style="margin-left: 8">n/a</dd>
<dt>Encoding considerations:</dt>
<dd style="margin-left: 8">Encoding considerations are identical to those specified for the <samp>application/json</samp> media type. See <a href="#RFC8259" class="xref">[RFC8259]</a>.</dd>
<dt>Security considerations:</dt>
<dd style="margin-left: 8">Security considerations related to the generation and consumption of ALTO Protocol messages are discussed in Section 15 of <a href="#RFC7285" class="xref">[RFC7285]</a>.</dd>
<dt>Interoperability considerations:</dt>
<dd style="margin-left: 8">This document specifies formats of conforming messages and the interpretation thereof.</dd>
<dt>Published specification:</dt>
<dd style="margin-left: 8">This document is the specification for these media types; see <a href="#tbl-media-types" class="xref">Table 1</a> for the section documenting each media type.</dd>
<dt>Applications that use this media type:</dt>
<dd style="margin-left: 8">ALTO servers and ALTO clients either stand alone or are embedded within other applications.</dd>
<dt>Additional information:</dt>
<dd style="margin-left: 8">
<dl>
<dt>Magic number(s):</dt>
<dd style="margin-left: 8">n/a</dd>
<dt>File extension(s):</dt>
<dd style="margin-left: 8">This document uses the mime type to refer to protocol messages and thus does not require a file extension.</dd>
<dt>Macintosh file type code(s):</dt>
<dd style="margin-left: 8">n/a</dd>
</dl>
<p> </p>
</dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd style="margin-left: 8">See Authors&#8217; Addresses section.</dd>
<dt>Intended usage:</dt>
<dd style="margin-left: 8">COMMON</dd>
<dt>Restrictions on usage:</dt>
<dd style="margin-left: 8">n/a</dd>
<dt>Author:</dt>
<dd style="margin-left: 8">See Authors&#8217; Addresses section.</dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">Internet Engineering Task Force (mailto:iesg@ietf.org).</dd>
</dl>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> <a href="#acknowledgements" id="acknowledgements">Acknowledgements</a>
</h1>
<h1 id="rfc.references">
<a href="#rfc.references">14.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">14.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2387">[RFC2387]</b></td>
<td class="top">
<a>Levinson, E.</a>, "<a href="https://tools.ietf.org/html/rfc2387">The MIME Multipart/Related Content-type</a>", RFC 2387, DOI 10.17487/RFC2387, August 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7285">[RFC7285]</b></td>
<td class="top">
<a>Alimi, R.</a>, <a>Penno, R.</a>, <a>Yang, Y.</a>, <a>Kiesel, S.</a>, <a>Previdi, S.</a>, <a>Roome, W.</a>, <a>Shalunov, S.</a> and <a>R. Woundy</a>, "<a href="https://tools.ietf.org/html/rfc7285">Application-Layer Traffic Optimization (ALTO) Protocol</a>", RFC 7285, DOI 10.17487/RFC7285, September 2014.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">14.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-alto-cost-calendar">[I-D.ietf-alto-cost-calendar]</b></td>
<td class="top">
<a>Randriamasy, S.</a>, <a>Yang, Y.</a>, <a>Wu, Q.</a>, <a>Lingli, D.</a> and <a>N. Schwan</a>, "<a href="https://tools.ietf.org/html/draft-ietf-alto-cost-calendar-09">ALTO Cost Calendar</a>", Internet-Draft draft-ietf-alto-cost-calendar-09, November 2018.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-alto-incr-update-sse">[I-D.ietf-alto-incr-update-sse]</b></td>
<td class="top">
<a>Roome, W.</a>, <a>Yang, Y.</a> and <a>S. Chen</a>, "<a href="https://tools.ietf.org/html/draft-ietf-alto-incr-update-sse-15">ALTO Incremental Updates Using Server-Sent Events (SSE)</a>", Internet-Draft draft-ietf-alto-incr-update-sse-15, December 2018.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-alto-path-vector">[I-D.ietf-alto-path-vector]</b></td>
<td class="top">
<a>Bernstein, G.</a>, <a>Chen, S.</a>, <a>Gao, K.</a>, <a>Lee, Y.</a>, <a>Roome, W.</a>, <a>Scharf, M.</a>, <a>Yang, Y.</a> and <a>J. Zhang</a>, "<a href="https://tools.ietf.org/html/draft-ietf-alto-path-vector-04">ALTO Extension: Path Vector Cost Type</a>", Internet-Draft draft-ietf-alto-path-vector-04, July 2018.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-alto-unified-props-new">[I-D.ietf-alto-unified-props-new]</b></td>
<td class="top">
<a>Roome, W.</a>, <a>Chen, S.</a>, <a>Randriamasy, S.</a>, <a>Yang, Y.</a> and <a>J. Zhang</a>, "<a href="https://tools.ietf.org/html/draft-ietf-alto-unified-props-new-04">Unified Properties for the ALTO Protocol</a>", Internet-Draft draft-ietf-alto-unified-props-new-04, June 2018.</td>
</tr>
<tr>
<td class="reference"><b id="JSONIQ">[JSONIQ]</b></td>
<td class="top">
<a>Robie, J.</a>, <a>Fourny, G.</a>, <a>Brantner, M.</a>, <a>Florescu, D.</a>, <a>Westmann, T.</a> and <a>M. Zaharioudakis</a>, "<a>JSONiq - the SQL of NoSQL 1.0</a>", JSONiq , 2015.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2046">[RFC2046]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>N. Borenstein</a>, "<a href="https://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>", RFC 2046, DOI 10.17487/RFC2046, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8189">[RFC8189]</b></td>
<td class="top">
<a>Randriamasy, S.</a>, <a>Roome, W.</a> and <a>N. Schwan</a>, "<a href="https://tools.ietf.org/html/rfc8189">Multi-Cost Application-Layer Traffic Optimization (ALTO)</a>", RFC 8189, DOI 10.17487/RFC8189, October 2017.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8259">[RFC8259]</b></td>
<td class="top">
<a>Bray, T.</a>, "<a href="https://tools.ietf.org/html/rfc8259">The JavaScript Object Notation (JSON) Data Interchange Format</a>", STD 90, RFC 8259, DOI 10.17487/RFC8259, December 2017.</td>
</tr>
<tr>
<td class="reference"><b id="W3CXQUERY">[W3CXQUERY]</b></td>
<td class="top">
<a>Robie, J.</a>, <a>Chamberlin, D.</a>, <a>Dyck, M.</a> and <a>J. Snelson</a>, "<a>XQuery 3.0: An XML query language</a>", W3C Recommendation, W3C, 2014.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.A">
<a href="#rfc.appendix.A">Appendix A.</a> <a href="#figures" id="figures">Figures</a>
</h1>
<p id="rfc.section.A.p.1">TODO: Put additional figures here if we have.</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Shiwei Dawn Chen</span> 
	  <span class="n hidden">
		<span class="family-name">Chen</span>
	  </span>
	</span>
	<span class="org vcardline">Tongji University</span>
	<span class="adr">
	  <span class="vcardline">4800 Cao'An Hwy</span>

	  <span class="vcardline">
		<span class="locality">Shanghai</span>,  
		<span class="region"></span>
		<span class="code">201804</span>
	  </span>
	  <span class="country-name vcardline">China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:dawn_chen_f@hotmail.com">dawn_chen_f@hotmail.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jingxuan Jensen Zhang</span> 
	  <span class="n hidden">
		<span class="family-name">Zhang</span>
	  </span>
	</span>
	<span class="org vcardline">Tongji University</span>
	<span class="adr">
	  <span class="vcardline">4800 Cao'An Hwy</span>

	  <span class="vcardline">
		<span class="locality">Shanghai</span>,  
		<span class="region"></span>
		<span class="code">201804</span>
	  </span>
	  <span class="country-name vcardline">China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jingxuan.n.zhang@gmail.com">jingxuan.n.zhang@gmail.com</a></span>

  </address>
</div>

</body>
</html>
